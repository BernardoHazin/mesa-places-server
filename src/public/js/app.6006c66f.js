(function(e){function t(t){for(var a,o,s=t[0],l=t[1],c=t[2],f=0,d=[];f<s.length;f++)o=s[f],r[o]&&d.push(r[o][0]),r[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={app:0},i=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("744f"),n("6c7b"),n("7514"),n("20d6"),n("1c4c"),n("6762"),n("cadf"),n("e804"),n("55dd"),n("d04f"),n("c8ce"),n("217b"),n("7f7f"),n("f400"),n("7f25"),n("536b"),n("d9ab"),n("f9ab"),n("32d7"),n("25c9"),n("9f3c"),n("042e"),n("c7c6"),n("f4ff"),n("049f"),n("7872"),n("a69f"),n("0b21"),n("6c1a"),n("c7c62"),n("84b4"),n("c5f6"),n("2e37"),n("fca0"),n("7cdf"),n("ee1d"),n("b1b1"),n("87f3"),n("9278"),n("5df2"),n("04ff"),n("f751"),n("4504"),n("fee7"),n("ffc1"),n("0d6d"),n("9986"),n("8e6e"),n("25db"),n("e4f7"),n("b9a1"),n("64d5"),n("9aea"),n("db97"),n("66c8"),n("57f0"),n("165b"),n("456d"),n("cf6a"),n("fd24"),n("8615"),n("551c"),n("097d"),n("df1b"),n("2397"),n("88ca"),n("ba16"),n("d185"),n("ebde"),n("2d34"),n("f6b3"),n("2251"),n("c698"),n("a19f"),n("9253"),n("9275"),n("3b2b"),n("3846"),n("4917"),n("a481"),n("28a5"),n("386d"),n("6b54"),n("4f7f"),n("8a81"),n("ac4d"),n("8449"),n("9c86"),n("fa83"),n("48c0"),n("a032"),n("aef6"),n("d263"),n("6c37"),n("9ec8"),n("5695"),n("2fdb"),n("d0b0"),n("5df3"),n("b54a"),n("f576"),n("ed50"),n("788d"),n("14b9"),n("f386"),n("f559"),n("1448"),n("673e"),n("242a"),n("c66f"),n("b05c"),n("34ef"),n("6aa2"),n("15ac"),n("af56"),n("b6e4"),n("9c29"),n("63d9"),n("4dda"),n("10ad"),n("c02b"),n("4795"),n("130f"),n("ac6a"),n("96cf");var a=n("2b0e"),r=n("ce5b"),i=n.n(r);n("bf40");a["default"].use(i.a,{theme:{primary:"#d94234",secondary:"#ffffff",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},options:{customProperties:!0},iconfont:"fa"});var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("v-app",[a("notifications",{attrs:{classes:"notification",color:"red",position:"top center",duration:6e3}}),a("v-toolbar",[a("img",{staticClass:"logo-img",staticStyle:{cursor:"pointer"},attrs:{alt:"Places logo",src:n("cf05")},on:{click:function(t){return e.$router.push({name:"home"})}}}),a("v-toolbar-title",{staticClass:"hidden-sm-and-down"},[e._v("\n        Places "),e.email?a("span",[e._v("- "+e._s(e.name))]):e._e()]),a("v-spacer"),a("v-toolbar-items",{staticClass:"row ac"},[e.email?e._e():a("v-btn",{attrs:{flat:""},on:{click:function(t){return e.setSideComponent("login")}}},[e._v("Entrar")]),e.email?e._e():a("v-btn",{attrs:{flat:""},on:{click:function(t){return e.setSideComponent("register")}}},[e._v("Cadastrar-se")]),e.email?a("v-btn",{attrs:{flat:""},on:{click:e.openProfile}},[e._v("Perfil")]):e._e(),e.email?a("v-btn",{attrs:{flat:""},on:{click:e.logout}},[e._v("Sair")]):e._e()],1)],1),a("v-dialog",{attrs:{"max-width":"600px",persistent:""},model:{value:e.profileDialog,callback:function(t){e.profileDialog=t},expression:"profileDialog"}},[a("profile",{attrs:{email:e.email,name:e.name,profileImg:e.profileImg},on:{close:function(t){e.profileDialog=!1}}})],1),a("router-view")],1)],1)},s=[],l={methods:{setSideComponent:function(e){this.$store.dispatch("setSideComponent",e)}}},c={methods:{logout:function(){FB.logout(function(){}),this.$store.dispatch("logout")}}},u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",[n("v-card-title",{staticClass:"title primary white--text",staticStyle:{"white-space":"wrap"},attrs:{dark:""}},[e._v("\n      Perfil\n      "),n("v-spacer"),n("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){return e.$emit("close")}}},[n("v-icon",[e._v("fas fa-times")])],1)],1),n("v-card-text",[n("img",{staticStyle:{"border-radius":"50%"},attrs:{src:e.profileImg,alt:"Profile image",width:"150px"}}),n("v-text-field",{ref:"emailInput",attrs:{box:"",label:"Email",readonly:""},model:{value:e.inputEmail,callback:function(t){e.inputEmail=t},expression:"inputEmail"}}),n("v-text-field",{ref:"nameInput",attrs:{box:"",label:"Nome",loading:e.loading,"append-icon":"fas fa-pen"},on:{keypress:e.changeName,blur:e.changeName},model:{value:e.inputName,callback:function(t){e.inputName=t},expression:"inputName"}}),n("v-btn",{attrs:{color:"primary",loading:e.passwordLoading},on:{"~click":function(t){return e.changePassword(t)}}},[e._v("Alterar senha")])],1)],1)],1)},f=[],d=n("9530"),p=n.n(d);function m(){var e=g(["\n              mutation changeName($name: String!) {\n                changeName(name: $name) {\n                  name\n                }\n              }\n            "]);return m=function(){return e},e}function v(){var e=g(["\n            mutation changePasswordRequest {\n              changePasswordRequest\n            }\n          "]);return v=function(){return e},e}function g(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var h={mixins:[c,l],props:["email","name","profileImg"],computed:{inputEmail:{get:function(){return this.newEmail||this.email},set:function(e){this.newEmail=e}},inputName:{get:function(){return this.newName||this.name},set:function(e){this.newName=e}}},data:function(){return{loading:!1,passwordLoading:!1,newEmail:"",newName:""}},methods:{changePassword:function(){var e=this;this.passwordLoading=!0,this.$apollo.mutate({mutation:p()(v())}).then(function(t){e.$notify({type:"success",title:"Alterar senha",text:"Acesse seu email para continuar"})}).catch(function(t){e.$emit("close"),"GraphQL error: Sessão inválida"===t.message?(e.logout(),e.setSideComponent("login"),e.$notify({type:"error",title:"Sessão",text:"Sessão encerrada"})):e.$notify({type:"error",title:"Error",text:t.message.replace("GraphQL error: ","")})}).finally(function(){e.passwordLoading=!1})},changeName:function(e){var t=this,n=e.charCode;13===n&&this.newName&&(this.loading=!0,this.$apollo.mutate({mutation:p()(m()),variables:{name:this.newName}}).then(function(e){var n=e.data;t.$notify({type:"success",title:"Alterar nome",text:"Nome de usuário alterado com sucesso!"}),t.$store.dispatch("setName",n.changeName.name)}).catch(function(e){t.$emit("close"),"GraphQL error: Sessão inválida"===e.message?(t.logout(),t.setSideComponent("login"),t.$notify({type:"error",title:"Sessão",text:"Sessão encerrada"})):t.$notify({type:"error",title:"Error",text:e.message.replace("GraphQL error: ","")})}).finally(function(){t.loading=!1}))}}},b=h,w=n("2877"),y=Object(w["a"])(b,u,f,!1,null,null,null),$=y.exports,P=n("2f62");function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){k(e,t,n[t])})}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O={mixins:[l,c],components:{profile:$},computed:x({},Object(P["b"])(["email","name","profileImg"])),data:function(){return{profileDialog:!1}},methods:{openProfile:function(){this.profileDialog=!0}}},S=O,C=(n("7faf"),Object(w["a"])(S,o,s,!1,null,null,null)),_=C.exports,j=n("8c4f"),I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{directives:[{name:"resize",rawName:"v-resize",value:e.onResize,expression:"onResize"}],staticClass:"home pa-2 fph",attrs:{column:e.isMobile||e.x<800}},[n("v-flex",{staticClass:"red",staticStyle:{"min-height":"50vh"},attrs:{xs8:""}},[n("GmapMap",{staticStyle:{width:"100%",height:"100%"},attrs:{center:e.position,zoom:15}},e._l(e.places,function(t,a){return n("GmapMarker",{key:a,attrs:{position:t.position,clickable:!0,draggable:!0},on:{click:function(n){return e.clickMark(t)}}})}),1)],1),n("v-flex",{staticClass:"elevation-4",attrs:{xs4:""}},[n("transition",{attrs:{name:"fade",mode:"out-in"}},["search"===e.$store.state.sideComponent?n("search",{key:"1",attrs:{places:e.places.filter(function(e){return e.name}).length?e.places.filter(function(e){return e.name}):e.favorites,searchLoading:e.searchLoading},on:{search:e.getPlace,setPlace:e.setPlace,info:e.getPlaceInfo}}):"login"===e.$store.state.sideComponent?n("login",{key:"2"}):"register"===e.$store.state.sideComponent?n("register",{key:"3"}):e._e()],1)],1),n("v-dialog",{attrs:{"max-width":"600px",scrollable:""},model:{value:e.placeDialog,callback:function(t){e.placeDialog=t},expression:"placeDialog"}},[n("v-card",{staticClass:"white"},[n("v-card-title",{staticClass:"title primary white--text",staticStyle:{"white-space":"wrap"},attrs:{dark:""}},[n("img",{staticClass:"mr-2",attrs:{width:"20px",src:e.selectedPlace.icon}}),e._v("\n        "+e._s(e.selectedPlace.name)+"\n        "),n("v-spacer"),n("v-btn",{attrs:{icon:"",dark:""},on:{click:e.closeDialog}},[n("v-icon",[e._v("fas fa-times")])],1)],1),n("v-divider"),e.dialogLoading?n("v-progress-linear",{attrs:{indeterminate:!0}}):e.reviews.length?n("v-list",{attrs:{"three-line":""}},e._l(e.reviews,function(t,a){return n("v-list-tile",{key:a,attrs:{avatar:""}},[n("v-list-tile-avatar",[n("img",{attrs:{src:t.profileImg}})]),n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"row ac"},[e._v("\n              "+e._s(t.comment)+"\n            ")]),n("v-rating",{attrs:{small:"",color:"primary",readonly:""},model:{value:t.rating,callback:function(n){e.$set(t,"rating",n)},expression:"review.rating"}}),n("v-list-tile-sub-title",[e._v("\n              "+e._s(t.name)+"\n            ")])],1)],1)}),1):n("div",{staticClass:"pa-4 fs-2"},[e._v("\n        Nenhum review encontrado :/\n      ")]),n("v-card-actions",[e.email&&!e.hasReviwed?n("v-form",{ref:"reviewForm",staticClass:"fpw col"},[n("v-text-field",{attrs:{label:"Comentário"},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}}),n("div",{staticClass:"row"},[n("v-rating",{attrs:{small:""},model:{value:e.rating,callback:function(t){e.rating=t},expression:"rating"}}),n("v-spacer"),n("v-btn",{attrs:{color:"primary",disabled:e.dialogLoading||!e.comment||!e.rating},on:{click:e.sendReview}},[e._v("\n              Enviar\n              "),n("v-icon",{staticClass:"ml-3"},[e._v("fas fa-share")])],1)],1)],1):e._e()],1)],1)],1)],1)},N=[],E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"col"},[n("div",{staticClass:"row ac"},[n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.setSideComponent("search")}}},[n("v-icon",{attrs:{color:"primary"}},[e._v("fas fa-chevron-left")])],1),n("h3",{staticClass:"fs-2 primary--text"},[e._v("Entrar")])],1),n("v-form",{staticClass:"pa-2 col mt-2",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.toLogin(t)}}},[n("v-text-field",{attrs:{box:"",disabled:e.loading,label:"Email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("v-text-field",{attrs:{box:"",disabled:e.loading,type:"password",label:"Senha!"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("div",{staticClass:"row jc"},[n("v-btn",{attrs:{type:"submit",color:"primary",disabled:e.loading||!e.email||!e.password,loading:e.loading}},[e._v("Entrar\n        ")]),n("v-btn",{attrs:{dark:"",color:"#3b5998",disabled:e.loading},on:{click:e.fblogin}},[n("v-icon",[e._v("fab fa-facebook-f")])],1)],1)],1)],1)])},L=[];function F(){var e=z(["\n            query login($email: String!, $password: String!) {\n              login(email: $email, password: $password) {\n                email\n                name\n                token\n                profileImg\n                favorites {\n                  placeId\n                  placeName\n                  placeIcon\n                }\n              }\n            }\n          "]);return F=function(){return e},e}function D(){var e=z(["\n              query fbLogin($accessToken: String!) {\n                fbLogin(accessToken: $accessToken) {\n                  email\n                  name\n                  token\n                  profileImg\n                  favorites {\n                    placeId\n                    placeName\n                    placeIcon\n                  }\n                }\n              }\n            "]);return D=function(){return e},e}function z(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var A={mixins:[l,c],data:function(){return{loading:!1,email:"",password:""}},methods:{fblogin:function(){FB.login(this.signInUser,{scope:"email,public_profile"})},signInUser:function(e){var t=this,n=e.status,a=e.authResponse;"connected"===n?(this.loading=!0,this.$apollo.query({query:p()(D()),fetchPolicy:"no-cache",variables:{accessToken:a.accessToken}}).then(function(e){var n=e.data;t.$store.dispatch("login",n.fbLogin)}).catch(function(e){"GraphQL error: Sessão inválida"===e.message?t.logout():t.$notify({type:"error",title:"Error ao efetuar login",text:e.message.replace("GraphQL error: ","")})}).finally(function(){t.loading=!1})):this.$notify({type:"error",title:"Error ao efetuar login",text:err.message.replace("GraphQL error: ","")})},toLogin:function(){var e=this;this.loading=!0,this.$apollo.query({query:p()(F()),fetchPolicy:"no-cache",variables:{email:this.email,password:this.password}}).then(function(t){var n=t.data;e.$store.dispatch("login",n.login)}).catch(function(t){e.$notify({type:"error",title:"Error ao efetuar login",text:t.message.replace("GraphQL error: ","")})}).finally(function(){e.loading=!1})}}},G=A,q=Object(w["a"])(G,E,L,!1,null,null,null),Q=q.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"col"},[n("div",{staticClass:"row ac"},[n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.setSideComponent("search")}}},[n("v-icon",{attrs:{color:"primary"}},[e._v("fas fa-chevron-left")])],1),n("h3",{staticClass:"fs-2 primary--text"},[e._v("Cadastrar-se")])],1),n("v-form",{staticClass:"pa-2 col mt-2",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[n("v-text-field",{attrs:{box:"",disabled:e.loading,label:"Email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("v-text-field",{attrs:{box:"",disabled:e.loading,label:"Name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("v-text-field",{attrs:{box:"",disabled:e.loading,type:e.seePassword?"text":"password","append-icon":e.seePassword?"fas fa-eye":"fas fa-eye-slash",label:"Senha!"},on:{"click:append":function(t){e.seePassword=!e.seePassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("v-btn",{attrs:{type:"submit",color:"primary",disabled:e.loading||!e.email||!e.password,loading:e.loading}},[e._v("Cadastrar\n      ")])],1)],1)])},T=[];function M(){var e=U(["\n            mutation registerUser(\n              $email: String!\n              $name: String!\n              $password: String!\n            ) {\n              registerUser(email: $email, name: $name, password: $password) {\n                email\n                name\n                token\n                profileImg\n                favorites {\n                  placeId\n                  placeName\n                  placeIcon\n                }\n              }\n            }\n          "]);return M=function(){return e},e}function U(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var B={mixins:[l],data:function(){return{loading:!1,seePassword:!1,name:"",email:"",password:""}},methods:{register:function(){var e=this;this.loading=!0,this.$apollo.mutate({mutation:p()(M()),variables:{email:this.email,name:this.name,password:this.password}}).then(function(t){var n=t.data;e.$notify({type:"success",title:"Cadastro",text:"Cadastro realizado com suceeso!"}),e.$store.dispatch("login",n.registerUser)}).catch(function(t){e.$notify({type:"error",title:"Error ao efetuar cadastro",text:t.message.replace("GraphQL error: ","")})}).finally(function(){e.loading=!1})}}},J=B,K=Object(w["a"])(J,R,T,!1,null,null,null),W=K.exports,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col"},[n("v-slider",{staticClass:"pa-1",attrs:{label:"Raio "+e.range+"km",max:50},model:{value:e.range,callback:function(t){e.range=t},expression:"range"}}),n("v-text-field",{attrs:{box:"",loading:e.searchLoading,label:"Procure um lugar!"},model:{value:e.searchPlace,callback:function(t){e.searchPlace=t},expression:"searchPlace"}}),n("v-list",{staticClass:"transparent",staticStyle:{"max-height":"60vh",overflow:"auto"},attrs:{"two-line":"",dense:""}},e._l(e.places,function(t,a){return n("v-list-tile",{key:a,staticStyle:{cursor:"pointer"},on:{click:function(n){return n.target!==n.currentTarget?null:e.$emit("setPlace",t.position)}}},[n("img",{attrs:{width:"20px",src:t.icon}}),n("div",{staticClass:"ml-1"},[e._v(e._s(t.name))]),n("v-spacer"),e.email?n("v-btn",{attrs:{small:"",icon:""},on:{click:function(n){return e.favorite(t)}}},[n("v-icon",{attrs:{color:"primary"}},[e._v("\n          "+e._s(e.favorites.some(function(e){return e.placeId===t.id})?"fas":"far")+"\n          fa-star\n        ")])],1):e._e(),n("v-btn",{attrs:{small:"",icon:""},on:{click:function(n){return e.$emit("info",t)}}},[n("v-icon",{attrs:{color:"primary"}},[e._v("fas fa-info-circle")])],1)],1)}),1)],1)},V=[],X=n("2ef0");function Y(){var e=Z(["\n            mutation setFavorite(\n              $placeId: String!\n              $placeName: String!\n              $placeIcon: String!\n            ) {\n              setFavorite(\n                placeId: $placeId\n                placeName: $placeName\n                placeIcon: $placeIcon\n              )\n            }\n          "]);return Y=function(){return e},e}function Z(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){te(e,t,n[t])})}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne={mixins:[c,l],props:{places:[Object,Array],searchLoading:Boolean},computed:ee({},Object(P["b"])(["email","favorites"])),data:function(){return{searchPlace:"",range:10}},watch:{searchPlace:Object(X["debounce"])(function(e){this.$emit("search",e,this.range)},300),range:Object(X["debounce"])(function(e){this.searchPlace&&this.$emit("search",this.searchPlace,e)},300)},methods:{favorite:function(e){var t=this,n=this.favorites.find(function(t){return t.placeId===e.id});n?this.$store.dispatch("removeFavorite",this.favorites.indexOf(n)):this.$store.dispatch("addFavorite",{placeId:e.id,placeName:e.name,placeIcon:e.icon}),this.$apollo.mutate({mutation:p()(Y()),variables:{placeId:e.id,placeName:e.name,placeIcon:e.icon}}).catch(function(e){"GraphQL error: Sessão inválida"===e.message?(t.logout(),t.setSideComponent("login"),t.$notify({type:"error",title:"Sessão",text:"Sessão encerrada"})):t.$notify({type:"error",title:"Error",text:e.message.replace("GraphQL error: ","")})})}}},ae=ne,re=Object(w["a"])(ae,H,V,!1,null,null,null),ie=re.exports;function oe(){var e=ue(["\n            query getPlace(\n              $place: String!\n              $radius: Int!\n              $lat: Float\n              $lng: Float\n            ) {\n              getPlace(place: $place, radius: $radius, lat: $lat, lng: $lng) {\n                id\n                icon\n                name\n                rating\n                isOpen\n                lat\n                lng\n              }\n            }\n          "]);return oe=function(){return e},e}function se(){var e=ue(["\n            query getAvaliations($placeId: String!) {\n              getAvaliations(placeId: $placeId) {\n                name\n                email\n                profileImg\n                rating\n                comment\n              }\n            }\n          "]);return se=function(){return e},e}function le(){var e=ue(["\n            mutation addAvaliation(\n              $placeId: String!\n              $userEmail: String!\n              $rating: Int!\n              $comment: String!\n            ) {\n              addAvaliation(\n                placeId: $placeId\n                userEmail: $userEmail\n                rating: $rating\n                comment: $comment\n              )\n            }\n          "]);return le=function(){return e},e}function ce(){var e=ue(["\n          subscription avaliationAdded {\n            avaliationAdded {\n              name\n              email\n              placeId\n              profileImg\n              rating\n              comment\n            }\n          }\n        "]);return ce=function(){return e},e}function ue(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){de(e,t,n[t])})}return e}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pe={mixins:[c,l],name:"home",computed:fe({},Object(P["b"])(["email"]),{isMobile:function(){return navigator.userAgent.includes("Mobile")},hasReviwed:function(){var e=this;return this.reviews.some(function(t){return t.email===e.$store.state.email})},favorites:function(){return this.$store.state.favorites.map(function(e){return{id:e.placeId,name:e.placeName,icon:e.placeIcon}})}}),components:{login:Q,register:W,search:ie},data:function(){return{position:{lat:0,lng:0},userPosition:{lat:0,lng:0},x:window.innerWidth,places:[],selectedComponent:"search",selectedPlace:"",reviews:[],rating:1,comment:"",searchLoading:!1,placeDialog:!1,dialogLoading:!1}},created:function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(this.setUserPosition)},apollo:{$subscribe:{avaliationAdded:{query:p()(ce()),result:function(e){var t=this,n=e.data;this.email&&!this.hasReviwed&&this.$refs.reviewForm.reset(),this.selectedPlace&&n.avaliationAdded.some(function(e){return e.placeId===t.selectedPlace.id})&&(this.reviews=n.avaliationAdded)}}}},methods:{closeDialog:function(){this.placeDialog=!1,this.rating=1,this.email&&!this.hasReviwed&&this.$refs.reviewForm.reset()},onResize:function(){this.x=window.innerWidth},setPlace:function(e){this.position=e},setUserPosition:function(e){this.userPosition={lat:e.coords.latitude,lng:e.coords.longitude},this.position=this.userPosition,this.places.push({position:this.position})},clickMark:function(e){this.position=e.position,e.id&&this.getPlaceInfo(e)},sendReview:function(){var e=this;this.dialogLoading=!0,this.$apollo.mutate({mutation:p()(le()),variables:{placeId:this.selectedPlace.id,userEmail:this.$store.state.email,rating:this.rating,comment:this.comment}}).then(function(e){}).catch(function(t){"GraphQL error: Sessão inválida"===t.message?(e.closeDialog(),e.logout(),e.setSideComponent("login"),e.$notify({type:"error",title:"Sessão",text:"Sessão encerrada"})):e.$notify({type:"error",title:"Error",text:t.message.replace("GraphQL error: ","")})}).finally(function(){e.email&&!e.hasReviwed&&e.$refs.reviewForm.reset(),e.dialogLoading=!1})},getPlaceInfo:function(e){var t=this;this.dialogLoading=!0,this.$apollo.query({query:p()(se()),fetchPolicy:"no-cache",variables:{placeId:e.id}}).then(function(n){var a=n.data;t.selectedPlace=e,t.reviews=a.getAvaliations,t.placeDialog=!0}).catch(function(e){t.$notify({type:"error",title:"Error ao efetuar cadastro",text:e.message.replace("GraphQL error: ","")})}).finally(function(){t.dialogLoading=!1})},getPlace:function(e,t){var n=this;e?(this.searchLoading=!0,this.$apollo.query({query:p()(oe()),variables:{place:e,radius:t,lat:this.userPosition.lat,lng:this.userPosition.lng}}).then(function(e){var t=e.data;t.getPlace.length>0?(n.places=t.getPlace.map(function(e){return{id:e.id,position:{lat:e.lat,lng:e.lng},name:e.name,icon:e.icon,rating:Number(e.rating)}}),n.position=n.places[0].position):n.places=[]}).catch(function(e){}).finally(function(){n.searchLoading=!1})):this.places=[]}}},me=pe,ve=Object(w["a"])(me,I,N,!1,null,null,null),ge=ve.exports,he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fph col jc"},[n("v-form",{on:{submit:function(t){return t.preventDefault(),e.changePassword(t)}}},[n("v-layout",{attrs:{column:"","align-center":"","justify-center":""}},[n("v-flex",{attrs:{xs6:""}},[n("v-text-field",{attrs:{box:"",label:"Senha atual",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("v-text-field",{attrs:{box:"",label:"Nova senha",type:"password"},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}}),n("v-text-field",{attrs:{box:"",label:"Confirmar nova senha",type:"password"},model:{value:e.confirmNewPassword,callback:function(t){e.confirmNewPassword=t},expression:"confirmNewPassword"}}),n("v-btn",{attrs:{type:"submit",color:"primary",loading:e.loading,disabled:e.isDisabled}},[e._v("Alterar senha")])],1)],1)],1)],1)},be=[];function we(){var e=ye(["\n            mutation changePassword($password: String!, $newPassword: String!) {\n              changePassword(password: $password, newPassword: $newPassword)\n            }\n          "]);return we=function(){return e},e}function ye(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var $e={computed:{isDisabled:function(){return!this.password||!this.newPassword||!this.confirmNewPassword||this.confirmNewPassword!==this.newPassword}},data:function(){return{loading:!1,password:"",newPassword:"",confirmNewPassword:""}},created:function(){this.$store.dispatch("setToken",this.$route.params.id)},methods:{changePassword:function(){var e=this;this.loading=!0,this.$apollo.mutate({mutation:p()(we()),variables:{password:this.password,newPassword:this.newPassword}}).then(function(t){e.$notify({type:"success",title:"Alterar senha",text:"Senha alterada com sucesso!"}),e.$router.push({name:"home"})}).catch(function(t){e.$notify({type:"error",title:"Error ao efetuar cadastro",text:t.message.replace("GraphQL error: ","")})}).finally(function(){e.loading=!1})}}},Pe=$e,xe=Object(w["a"])(Pe,he,be,!1,null,null,null),ke=xe.exports;a["default"].use(j["a"]);var Oe=new j["a"]({routes:[{path:"/",name:"home",component:ge},{path:"/:id",name:"changePassword",component:ke}]}),Se=n("0e44");a["default"].use(P["a"]);var Ce=new P["a"].Store({plugins:[Object(Se["a"])({storage:window.sessionStorage})],state:{email:"",name:"",profileImg:"",favorites:[],token:"",sideComponent:"search"},mutations:{setSideComponent:function(e,t){e.sideComponent=t},login:function(e,t){var n=t.email,a=t.token,r=t.profileImg,i=t.name,o=t.favorites;e.email=n,e.name=i,e.token=a,e.profileImg=r,e.favorites=o,e.sideComponent="search"},logout:function(e){e.email="",e.token="",e.favorites=[],e.sideComponent="search"},setName:function(e,t){e.name=t},setToken:function(e,t){e.token=t},addFavorite:function(e,t){e.favorites.push(t)},removeFavorite:function(e,t){e.favorites.splice(t,1)}},actions:{setSideComponent:function(e,t){var n=e.commit;n("setSideComponent",t)},login:function(e,t){var n=e.commit;n("login",t)},logout:function(e){var t=e.commit;t("logout")},setName:function(e,t){var n=e.commit;n("setName",t)},setToken:function(e,t){var n=e.commit;n("setToken",t)},addFavorite:function(e,t){var n=e.commit;n("addFavorite",t)},removeFavorite:function(e,t){var n=e.commit;n("removeFavorite",t)}},getters:{getAuthToken:function(e){return e.token}}}),_e=n("522d"),je=n("efe7");function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){Ne(e,t,n[t])})}return e}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a["default"].use(_e["a"]);var Ee="https://localhost:3000/graphql",Le={httpEndpoint:Ee,wsEndpoint:"wss://localhost:3000/subscriptions",tokenName:Ce.state.token,persisting:!1,websocketsOnly:!1,ssr:!1,getAuth:function(){return"Bearer ".concat(Ce.state.token)}};function Fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(je["createApolloClient"])(Ie({},Le,e)),n=t.apolloClient,a=t.wsClient;n.wsClient=a;var r=new _e["a"]({defaultClient:n,defaultOptions:{$query:{fetchPolicy:"no-cache"}},errorHandler:function(e){}});return r}var De=n("755e"),ze=n("ee98"),Ae=n.n(ze);a["default"].config.productionTip=!1,a["default"].use(Ae.a),a["default"].use(De,{load:{key:"AIzaSyBKNe_-6v1cLtGUjfNSsiNz4K6nnde2sUk",libraries:"places"}}),new a["default"]({router:Oe,store:Ce,apolloProvider:Fe(),render:function(e){return e(_)}}).$mount("#app")},"7faf":function(e,t,n){"use strict";var a=n("8fba"),r=n.n(a);r.a},"8fba":function(e,t,n){},cf05:function(e,t,n){e.exports=n.p+"img/logo.0750b83f.png"}});
//# sourceMappingURL=app.6006c66f.js.map